<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Danh sách Test Kit</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #f5f7fa; }
        h2 { color: #224488; }
        table { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.08);}
        th { background: #224488; color: #fff; }
        td, th { vertical-align: middle !important; }
        .btn-primary { background: #3366cc; }
        .btn-primary:hover { background: #224488; }
        .text-success { font-weight: bold; }
        .text-danger { font-weight: bold; }
    </style>
</head>
<body>
<div class="container">
    <h2 class="mt-3 mb-3">Danh sách Test Kit</h2>
    <div th:if="${message}" class="alert alert-success" th:text="${message}"></div>
    <table class="table table-bordered table-striped">
        <thead>
        <tr>
            <th>Tên Kit</th>
            <th>Loại Kit</th>
            <th>Loại Mẫu</th>
            <th>Giá cơ bản</th>
            <th>Giá hiện tại</th>
            <th>Số lượng tồn kho</th>
            <th>Mô tả</th>
            <th>Hạn sử dụng</th>
            <th>Nhà sản xuất</th>
            <th>Còn hàng</th>
            <th>Đặt mua</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="kit : ${testKitResponse}">
            <td th:text="${kit.kitName}"></td>
            <td th:text="${kit.kitType}"></td>
            <td th:text="${kit.sampleType}"></td>
            <td th:text="${#numbers.formatDecimal(kit.basePrice, 0, 'COMMA', 2, 'POINT')}"></td>
            <td th:text="${#numbers.formatDecimal(kit.currentPrice, 0, 'COMMA', 2, 'POINT')}"></td>
            <td th:text="${kit.quantityInStock}"></td>
            <td th:text="${kit.kitDescription}"></td>
            <td th:text="${kit.expiryDate}"></td>
            <td th:text="${kit.producedBy}"></td>
            <td>
                    <span th:text="${kit.isAvailable ? 'Còn hàng' : 'Hết hàng'}"
                          th:classappend="${kit.isAvailable ? 'text-success' : 'text-danger'}"></span>
            </td>
            <td>
                <a th:href="@{/order-kit(kitTestId=${kit.id})}" class="btn btn-primary btn-sm"
                   th:if="${kit.isAvailable}">Đặt mua</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>