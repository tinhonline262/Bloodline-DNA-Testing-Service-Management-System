<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<section class="section " id="pricing" th:fragment="pricing">
    <div class="container">
        <p class="fs-12 fw-semibold text-success mb-1 text-center"><span
                class="landing-section-heading">PRICING</span>
        </p>
        <div class="landing-title"></div>
        <h3 class="fw-semibold mb-2 text-center">Flexible Plans for Every Need.</h3>
        <div class="row justify-content-center">
            <div class="col-xl-9">
                <p class="text-muted fs-15 mb-5 fw-normal">Discover our range of comprehensive DNA testing
                    plans, tailored for both individual consumers and healthcare providers, offering
                    precision and value.</p>
            </div>
        </div>
        <div class="d-flex justify-content-center mb-4">
            <ul class="nav nav-tabs mb-3 tab-style-6 bg-primary-transparent" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pricing-monthly" data-bs-toggle="tab"
                            data-bs-target="#pricing-monthly-pane" type="button" role="tab"
                            aria-controls="pricing-monthly-pane" aria-selected="true">Civil</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pricing-yearly" data-bs-toggle="tab"
                            data-bs-target="#pricing-yearly-pane" type="button" role="tab"
                            aria-controls="pricing-yearly-pane" aria-selected="false">Administrative</button>
                </li>
            </ul>
        </div>
        <div class="card custom-card overflow-hidden shadow-none border-0">
            <div class="card-body p-0">
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane border-0 show active p-0" id="pricing-monthly-pane" role="tabpanel"
                         aria-labelledby="pricing-monthly" tabindex="0">
                        <div class="row justify-content-center">
                            <!-- Dynamic Individual Consumer Services -->
                            <div th:each="service, iterStat : ${individualServices}" class="col-lg-4 col-xl-4 col-md-8 col-sm-12">
                                <div class="card p-3 pricing-card shadow-none" 
                                     th:classappend="${iterStat.index == 1} ? 'border-primary advanced' : ''">
                                    <!-- Service Header -->
                                    <div th:if="${iterStat.index == 1}" 
                                         class="p-4 bg-primary rounded-3 d-block text-justified pt-2 text-fixed-white">
                                        <p class="fs-18 fw-semibold mb-1 pe-0" th:text="${service.serviceName}">Service Name
                                            <span class="badge bg-white text-primary float-end font-weight-normal fs-11">Best Value</span>
                                        </p>
                                        <p class="text-justify fw-semibold mb-1">
                                            <span class="fs-15 me-2">$</span>
                                            <span class="fs-22 me-1" th:text="${service.currentPrice}">0</span>
                                            <span class="fs-13">/test</span>
                                        </p>
                                        <p class="fs-13 mb-2" th:text="${service.serviceDescription}">Service description</p>
                                        <p class="fs-13 mb-1 text-fixed-white op-7">One-time payment per test.</p>
                                    </div>
                                    
                                    <!-- Regular Service Header -->
                                    <div th:unless="${iterStat.index == 1}" class="card-header d-block text-justified pt-2">
                                        <p class="fs-18 fw-semibold mb-1" th:text="${service.serviceName}">Service Name</p>
                                        <p class="text-justify fw-semibold mb-1">
                                            <span class="fs-15 me-2">$</span>
                                            <span class="fs-22 me-1" th:text="${service.currentPrice}">0</span>
                                            <span class="fs-13">/test</span>
                                        </p>
                                        <p class="fs-13 mb-1" th:text="${service.serviceDescription}">Service description</p>
                                        <p class="fs-13 mb-1" th:classappend="${iterStat.index == 2} ? 'text-danger' : 'text-secondary'">
                                            One-time payment per test.
                                        </p>
                                    </div>
                                    
                                    <!-- Service Features -->
                                    <div class="card-body pt-2">
                                        <ul class="text-justify pricing-body ps-0 mt-3 list-unstyled">
                                            <li th:each="feature : ${service.features}" th:if="${feature.isAvailable}">
                                                <i th:class="${iterStat.index == 1 ? 'mdi mdi-checkbox-marked-circle-outline text-primary fs-16 me-2' :
            (iterStat.index == 2 ? 'mdi mdi-checkbox-marked-circle-outline text-danger me-2 fs-16' :
                                   'mdi mdi-checkbox-marked-circle-outline me-2 fs-16 text-secondary')}"></i>
                                                <span th:text="${feature.featureName}">Feature name</span>
                                            </li>
                                            <!-- Default features if no features exist -->
                                            <li th:if="${#lists.isEmpty(service.features)}">
                                                <i th:class="${iterStat.index == 1 ? 'mdi mdi-checkbox-marked-circle-outline text-primary fs-16 me-2' :
            (iterStat.index == 2 ? 'mdi mdi-checkbox-marked-circle-outline text-danger me-2 fs-16' :
                                   'mdi mdi-checkbox-marked-circle-outline me-2 fs-16 text-secondary')}"></i>
                                                DNA analysis included
                                            </li>
                                            <li th:if="${#lists.isEmpty(service.features)}">
                                                <i th:class="${iterStat.index == 1 ? 'mdi mdi-checkbox-marked-circle-outline text-primary fs-16 me-2' :
            (iterStat.index == 2 ? 'mdi mdi-checkbox-marked-circle-outline text-danger me-2 fs-16' :
                                   'mdi mdi-checkbox-marked-circle-outline me-2 fs-16 text-secondary')}"></i>
                                                Professional reporting
                                            </li>
                                            <li th:if="${#lists.isEmpty(service.features)}">
                                                <i th:class="${iterStat.index == 1 ? 'mdi mdi-checkbox-marked-circle-outline text-primary fs-16 me-2' :
            (iterStat.index == 2 ? 'mdi mdi-checkbox-marked-circle-outline text-danger me-2 fs-16' :
                                   'mdi mdi-checkbox-marked-circle-outline me-2 fs-16 text-secondary')}"></i>
                                                Expert support
                                            </li>
                                        </ul>
                                    </div>
                                    
                                    <!-- Select Button -->
                                    <div class="card-footer text-center border-top-0 py-0">
                                        <a th:href="@{/user/order-service(medicalServiceId=${service.id})}" class="btn btn-primary w-100">
                                            <span class="ms-4 me-4">Select</span>
                                        </a>
                                    </div>

                                </div>
                            </div>
                            
                            <!-- Fallback when no services available -->
                            <div th:if="${#lists.isEmpty(individualServices)}" class="col-12 text-center">
                                <div class="alert alert-info">
                                    <h5>No services available at the moment</h5>
                                    <p>Please check back later or contact our support team for assistance.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane border-0 p-0" id="pricing-yearly-pane" role="tabpanel"
                         aria-labelledby="pricing-yearly" tabindex="0">
                        <div class="row justify-content-center">
                            <!-- Dynamic Clinical Services -->
                            <div th:each="service, iterStat : ${clinicalServices}" class="col-lg-4 col-xl-4 col-md-8 col-sm-12">
                                <div class="card p-3 pricing-card reveal revealrotate shadow-none"
                                     th:classappend="${iterStat.index == 1} ? 'border-primary advanced' : ''">
                                    <!-- Clinical Service Header (Featured) -->
                                    <div th:if="${iterStat.index == 1}" 
                                         class="p-4 bg-primary rounded-3 d-block text-justified pt-2 text-fixed-white">
                                        <p class="fs-18 fw-semibold mb-1 pe-0" th:text="${service.serviceName}">Service Name
                                            <span class="badge bg-white text-primary float-end font-weight-normal fs-11">Recommended</span>
                                        </p>
                                        <p class="text-justify fw-semibold mb-1">
                                            <span class="fs-15 me-2">$</span>
                                            <span class="fs-22 me-1" th:text="${service.currentPrice}">0</span>
                                            <span class="fs-13">/test</span>
                                        </p>
                                        <p class="fs-13 mb-2" th:text="${service.serviceDescription}">Service description</p>
                                        <p class="fs-13 mb-1 text-fixed-white op-7">Flexible payment options.</p>
                                    </div>
                                    
                                    <!-- Regular Clinical Service Header -->
                                    <div th:unless="${iterStat.index == 1}" class="card-header d-block text-justified pt-2">
                                        <p class="fs-18 fw-semibold mb-1" th:text="${service.serviceName}">Service Name</p>
                                        <p class="text-justify fw-semibold mb-1">
                                            <span class="fs-15 me-2">$</span>
                                            <span class="fs-22 me-1" th:text="${service.currentPrice}">0</span>
                                            <span class="fs-13">/test</span>
                                        </p>
                                        <p class="fs-13 mb-1" th:text="${service.serviceDescription}">Service description</p>
                                        <p class="fs-13 mb-1" th:classappend="${iterStat.index == 2} ? 'text-danger' : 'text-secondary'">
                                            <span th:text="${iterStat.index == 2} ? 'Volume-based pricing.' : 'Flexible payment options.'"></span>
                                        </p>
                                    </div>
                                    
                                    <!-- Clinical Service Features -->
                                    <div class="card-body pt-2">
                                        <ul class="text-justify pricing-body ps-0 mt-3 list-unstyled">
                                            <li th:each="feature : ${service.features}" th:if="${feature.isAvailable}">
                                                <i th:class="${iterStat.index == 1 ? 'mdi mdi-checkbox-marked-circle-outline text-primary fs-16 me-2' :
            (iterStat.index == 2 ? 'mdi mdi-checkbox-marked-circle-outline text-danger me-2 fs-16' :
                                   'mdi mdi-checkbox-marked-circle-outline me-2 fs-16 text-secondary')}"></i>
                                                <span th:text="${feature.featureName}">Feature name</span>
                                            </li>
                                            <!-- Default clinical features if no features exist -->
                                            <li th:if="${#lists.isEmpty(service.features)}">
                                                <i th:class="${iterStat.index == 1 ? 'mdi mdi-checkbox-marked-circle-outline text-primary fs-16 me-2' :
            (iterStat.index == 2 ? 'mdi mdi-checkbox-marked-circle-outline text-danger me-2 fs-16' :
                                   'mdi mdi-checkbox-marked-circle-outline me-2 fs-16 text-secondary')}"></i>
                                                CLIA-certified analysis
                                            </li>
                                            <li th:if="${#lists.isEmpty(service.features)}">
                                                <i th:class="${iterStat.index == 1 ? 'mdi mdi-checkbox-marked-circle-outline text-primary fs-16 me-2' :
            (iterStat.index == 2 ? 'mdi mdi-checkbox-marked-circle-outline text-danger me-2 fs-16' :
                                   'mdi mdi-checkbox-marked-circle-outline me-2 fs-16 text-secondary')}"></i>
                                                Medical-grade reporting
                                            </li>
                                            <li th:if="${#lists.isEmpty(service.features)}">
                                                <i th:class="${iterStat.index == 1 ? 'mdi mdi-checkbox-marked-circle-outline text-primary fs-16 me-2' :
            (iterStat.index == 2 ? 'mdi mdi-checkbox-marked-circle-outline text-danger me-2 fs-16' :
                                   'mdi mdi-checkbox-marked-circle-outline me-2 fs-16 text-secondary')}"></i>
                                                Professional support
                                            </li>
                                        </ul>
                                    </div>
                                    
                                    <!-- Select Button -->
                                    <div class="card-footer text-center border-top-0 py-0">
                                        <a th:href="@{/user/order-service(medicalServiceId=${service.id})}" class="btn btn-primary w-100">
                                            <span class="ms-4 me-4">Select</span>
                                        </a>
                                    </div>

                                </div>
                            </div>
                            
                            <!-- Fallback when no clinical services available -->
                            <div th:if="${#lists.isEmpty(clinicalServices)}" class="col-12 text-center">
                                <div class="alert alert-info">
                                    <h5>No clinical services available at the moment</h5>
                                    <p>Please check back later or contact our support team for assistance.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
</body>
</html>