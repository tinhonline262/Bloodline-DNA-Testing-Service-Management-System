<div th:fragment="content" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="page-header">
        <h1><i class="fas fa-file-invoice-dollar me-3"></i>Order Details</h1>
    </div>

    <!-- Order Info -->
    <div class="info-card">
        <h2><i class="fas fa-info-circle me-2"></i>Order Information</h2>

        <div class="info-row">
            <div class="info-label">Order ID:</div>
            <div class="info-value" th:text="${serviceOrderByCustomerResponse.idServiceOrder}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">Customer:</div>
            <div class="info-value" th:text="${serviceOrderByCustomerResponse.userName}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">Email:</div>
            <div class="info-value" th:text="${serviceOrderByCustomerResponse.userEmail}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">Phone Number:</div>
            <div class="info-value" th:text="${serviceOrderByCustomerResponse.userPhoneNumber}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">Medical Service:</div>
            <div class="info-value" th:text="${serviceOrderByCustomerResponse.medicalServiceName}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">Appointment Date:</div>
            <div class="info-value"
                 th:text="${#temporals.format(serviceOrderByCustomerResponse.appointmentDate, 'dd/MM/yyyy HH:mm')}">
            </div>
        </div>
        <div class="info-row">
            <div class="info-label">Collection Type:</div>
            <div class="info-value" th:text="${serviceOrderByCustomerResponse.collectionType}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">Collection Address:</div>
            <div class="info-value" th:text="${serviceOrderByCustomerResponse.collectionAddress}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">Total Amount:</div>
            <div class="info-value currency" th:text="${serviceOrderByCustomerResponse.finalAmount}"></div>
        </div>
        <div class="info-row">
            <div class="info-label">Status:</div>
            <div class="info-value">
                <span class="status-badge" th:text="${serviceOrderByCustomerResponse.orderStatus}"></span>
            </div>
        </div>
    </div>

    <!-- Test Kits -->
    <div class="table-container">
        <h2 class="table-header"><i class="fas fa-vial me-2"></i>Test Kits</h2>
        <div class="table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <th>Kit Name</th>
                    <th>Kit Type</th>
                    <th>Sample Type</th>
                    <th>Quantity</th>
                    <th>Unit Price</th>
                    <th>Total Price</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="kit : ${orderTestKits}">
                    <td th:text="${kit.kitName}"></td>
                    <td th:text="${kit.kitType}"></td>
                    <td th:text="${kit.sampleType}"></td>
                    <td th:text="${kit.quantityOrdered}"></td>
                    <td class="currency" th:text="${kit.unitPrice}"></td>
                    <td class="currency" th:text="${kit.totalPrice}"></td>
                </tr>
                <tr th:if="${#lists.isEmpty(orderTestKits)}">
                    <td colspan="6" class="empty-state">No test kits available</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Participants -->
    <div class="table-container">
        <h2 class="table-header"><i class="fas fa-users me-2"></i>Participants</h2>
        <div class="table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Gender</th>
                    <th>Date of Birth</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="participant : ${orderParticipants}">
                    <td th:text="${participant.firstName}"></td>
                    <td th:text="${participant.lastName}"></td>
                    <td th:text="${participant.gender}"></td>
                    <td th:text="${#temporals.format(participant.dateBirth, 'dd/MM/yyyy')}"></td>
                </tr>
                <tr th:if="${#lists.isEmpty(orderParticipants)}">
                    <td colspan="4" class="empty-state">No participants available</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="info-row">
        <div class="info-label">Payment Total:</div>
        <div class="info-value">
            <span class="status-badge" th:text="${paymentTotal}"></span>
        </div>
    </div>
    <!-- Back Button -->
    <div class="d-flex justify-content-start">
        <button onclick="history.back()" class="btn-back">
            <i class="fas fa-arrow-left"></i>
            Back
        </button>
    </div>
</div>
