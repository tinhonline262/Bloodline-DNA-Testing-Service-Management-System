<!-- Staff Sidebar -->
<aside th:fragment="sidebar" class="app-sidebar sticky" id="sidebar" xmlns:th="">
    <!-- Start::main-sidebar-header -->
    <div class="main-sidebar-header">
        <a th:href="@{/staff/dashboard}" class="header-logo">
            <span class="fs-4 fw-bold text-primary desktop-logo"><img src="/assets/images/brand-logos/desktop-logo.png"
                    alt="logo"></span>
            <span class="fs-4 fw-bold text-primary toggle-logo"><img src="/assets/images/brand-logos/toggle-logo.png"
                    alt="logo"></span>
            <span class="fs-4 fw-bold text-white desktop-white">Staff Panel</span>
            <span class="fs-4 fw-bold text-white toggle-white">DNA</span>
        </a>
    </div>
    <!-- End::main-sidebar-header -->

    <!-- Start::main-sidebar -->
    <div class="main-sidebar" id="sidebar-scroll" data-simplebar="init">
        <div class="simplebar-wrapper">
            <div class="simplebar-height-auto-observer-wrapper">
                <div class="simplebar-height-auto-observer"></div>
            </div>
            <div class="simplebar-mask">
                <div class="simplebar-offset">
                    <div class="simplebar-content-wrapper" tabindex="0" role="region" aria-label="scrollable content">
                        <div class="simplebar-content">
                            <!-- Start::nav -->
                            <nav class="main-menu-container nav nav-pills flex-column sub-open active">
                                <div class="slide-left active" id="slide-left">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="#7b8191" width="24" height="24"
                                        viewBox="0 0 24 24">
                                        <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z">
                                        </path>
                                    </svg>
                                </div>
                                <ul class="main-menu active">
                                    <!-- Start::slide__category -->
                                    <li class="slide__category"><span class="category-name">Main</span></li>
                                    <!-- End::slide__category -->

                                    <!-- Start::slide -->
                                    <li class="slide" th:classappend="${section == null} ? 'active' : ''">
                                        <a th:href="@{/staff/dashboard}" class="side-menu__item"
                                            th:classappend="${section == null} ? 'active' : ''">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon"
                                                viewBox="0 0 24 24">
                                                <path d="M0 0h24v24H0V0z" fill="none"></path>
                                                <path d="M5 5h4v6H5zm10 8h4v6h-4zM5 17h4v2H5zM15 5h4v2h-4z"
                                                    opacity=".3"></path>
                                                <path
                                                    d="M3 13h8V3H3v10zm2-8h4v6H5V5zm8 16h8V11h-8v10zm2-8h4v6h-4v-6zM13 3v6h8V3h-8zm6 4h-4V5h4v2zM3 21h8v-6H3v6zm2-4h4v2H5v-2z">
                                                </path>
                                            </svg>
                                            <span class="side-menu__label">Dashboard</span>
                                        </a>
                                    </li>
                                    <!-- End::slide -->

                                    <!-- Start::slide__category -->
                                    <li class="slide__category"><span class="category-name">Work Management</span></li>
                                    <!-- End::slide__category -->

                                    <!-- Start::slide - List Orders -->
                                    <li class="slide" th:classappend="${section == 'orders'} ? 'active' : ''">
                                        <a th:href="@{/staff/list-orders}" class="side-menu__item"
                                            th:classappend="${section == 'orders'} ? 'active' : ''"
                                            onclick="loadSection('orders')">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon"
                                                viewBox="0 0 24 24">
                                                <path d="M0 0h24v24H0V0z" fill="none"></path>
                                                <path
                                                    d="M12 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm1 13h-2v-2h2v2zm0-4h-2V7h2v6z"
                                                    opacity=".3"></path>
                                                <path
                                                    d="M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm0 2c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm-1 5h2v6h-2zm0 8h2v2h-2z">
                                                </path>
                                            </svg>
                                            <span class="side-menu__label">List Orders</span>
                                        </a>
                                    </li>
                                    <!-- End::slide -->

                                    <!-- Start::slide - Sample Collection -->

                                    <li class="slide" th:classappend="${section == 'sample-collection'} ? 'active' : ''">
                                        <a th:href="@{/staff/list-sample-collection}" class="side-menu__item" th:classappend="${section == 'sample-collection'} ? 'active' : ''" onclick="loadSection('sample-collection')">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon" viewBox="0 0 24 24">

                                                <path d="M0 0h24v24H0z" fill="none"></path>
                                                <path
                                                    d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z">
                                                </path>
                                            </svg>
                                            <span class="side-menu__label">List Sample Collection</span>
                                        </a>
                                    </li>
                                    <!-- End::slide --> <!-- Start::slide - Test Results -->
                                    <li class="slide" th:classappend="${section == 'test-results'} ? 'active' : ''">

                                        <a th:href="@{/staff/list-test-results}" class="side-menu__item" th:classappend="${section == 'test-results'} ? 'active' : ''" onclick="loadSection('test-results')">

                                            <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon"
                                                viewBox="0 0 24 24">
                                                <path d="M0 0h24v24H0V0z" fill="none"></path>
                                                <path d="M5 5v14h14V5H5zm4 12H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                                                    opacity=".3"></path>
                                                <path
                                                    d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z">
                                                </path>
                                            </svg>
                                            <span class="side-menu__label">List Test Results</span>
                                        </a>
                                    </li>
                                    <!-- End::slide -->

                                    <!-- Start::slide - Payment Management -->
                                    <li class="slide"
                                        th:classappend="${section == 'payment-management'} ? 'active' : ''">
                                        <a th:href="@{/staff/payment-management}" class="side-menu__item"
                                            th:classappend="${section == 'payment-management'} ? 'active' : ''"
                                            onclick="loadSection('payment-management')">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon"
                                                viewBox="0 0 24 24">
                                                <path d="M0 0h24v24H0z" fill="none"></path>
                                                <path
                                                    d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z">
                                                </path>
                                            </svg>
                                            <span class="side-menu__label">Payment Management</span>
                                        </a>
                                    </li>
                                    <!-- End::slide -->

                                </ul>
                                <div class="slide-right" id="slide-right">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="#7b8191" width="24" height="24"
                                        viewBox="0 0 24 24">
                                        <path
                                            d="M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z">
                                        </path>
                                    </svg>
                                </div>
                            </nav>
                            <!-- End::nav -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End::main-sidebar -->
</aside>

<script>
    function loadSection(section) {
        // Optional: Add loading indicator
        const content = document.getElementById('content');
        if (content) {
            content.innerHTML = '<div class="loading text-center p-5"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>';
        }

        // Navigate to dashboard with section parameter
        window.location.href = `/staff/dashboard?section=${section}`;
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Get current path
        const currentPath = window.location.pathname;

        // Get all sidebar menu items
        const menuItems = document.querySelectorAll('.side-menu__item');

        menuItems.forEach(item => {
            // Get the href attribute
            const href = item.getAttribute('href');

            // Check if current path includes the href (for sub-pages)
            if (href && currentPath.includes(href)) {
                // Remove active class from all items first
                menuItems.forEach(i => i.classList.remove('active'));
                // Add active class to current item
                item.classList.add('active');
            }
        });
    });
</script>

<style>
    /* Ensure sidebar links are clickable */
    .side-menu__item {
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .side-menu__item:hover {
        background-color: rgba(0, 0, 0, 0.1);
    }

    /* Active state styling */
    .slide.active .side-menu__item,
    .side-menu__item.active {
        background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
        color: white !important;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        border-radius: 6px;
    }

    .side-menu__item.active .side-menu__icon,
    .side-menu__item.active .side-menu__label {
        color: white !important;
    }

    .side-menu__item.active::after {
        content: '';
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 60%;
        background-color: white;
        border-radius: 4px 0 0 4px;
    }

    /* Loading spinner styles */
    .loading {
        padding: 50px;
    }

    .spinner-border {
        width: 3rem;
        height: 3rem;
    }
</style>