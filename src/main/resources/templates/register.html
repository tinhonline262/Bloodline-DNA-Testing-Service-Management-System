<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/layout :: head('Register')}">
    <meta charset="UTF-8">
    <title>Register - DNA Testing Service</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>

<body class="bg-light">
    <nav th:replace="~{fragments/layout :: navbar}"></nav>
    
    <div th:replace="~{fragments/layout :: alerts}"></div>

    <header class="bg-primary text-white text-center py-5 mb-5">
        <div class="container">
            <h1 class="display-4">Create Your Account</h1>
            <p class="lead">Join Bloodline DNA Testing Services today to access our full range of services</p>
        </div>
    </header>

    <div class="container form-container mb-5">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h2 class="mb-0">Register</h2>
            </div>
            <div class="card-body">
                <!-- Registration Form -->
                <form th:action="@{/register}" th:object="${registerRequest}" method="post" class="needs-validation" novalidate>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="firstName" class="form-label">First Name</label>
                            <input type="text" class="form-control" id="firstName" th:field="*{firstName}" required>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}">
                                First name error
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="lastName" class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="lastName" th:field="*{lastName}" required>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}">
                                Last name error
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" th:field="*{email}" required>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">
                            Email error
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" th:field="*{username}" required>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('username')}" th:errors="*{username}">
                            Username error
                        </div>
                        <small class="form-text text-muted">Username must be at least 3 characters long.</small>
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" th:field="*{password}" required>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">
                            Password error
                        </div>
                        <small class="form-text text-muted">Password must be at least 6 characters long.</small>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="termsCheck" required>
                        <label class="form-check-label" for="termsCheck">
                            I agree to the <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms of Service</a> and 
                            <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy Policy</a>
                        </label>
                        <div class="invalid-feedback">
                            You must agree to our Terms and Privacy Policy.
                        </div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">Register</button>
                    </div>
                </form>
            </div>
            <div class="card-footer text-center">
                <p class="mb-0">Already have an account? <a th:href="@{/login}">Login</a></p>
            </div>
        </div>
    </div>
    
    <!-- Terms of Service Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel">Terms of Service</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>1. Acceptance of Terms</h6>
                    <p>By registering for and using our services, you agree to be bound by these Terms of Service.</p>
                    
                    <h6>2. Description of Service</h6>
                    <p>Bloodline DNA Testing provides DNA testing services for various purposes including paternity, ancestry, and health screenings.</p>
                    
                    <h6>3. Registration</h6>
                    <p>Users must provide accurate and complete information when registering. You are responsible for maintaining the confidentiality of your account.</p>
                    
                    <h6>4. Privacy</h6>
                    <p>Your use of our services is also governed by our Privacy Policy.</p>
                    
                    <h6>5. Sample Collection</h6>
                    <p>You agree to follow our instructions for sample collection to ensure accurate results.</p>
                    
                    <h6>6. Results</h6>
                    <p>While we strive for accuracy, we cannot guarantee that our services are error-free.</p>
                    
                    <h6>7. Termination</h6>
                    <p>We reserve the right to terminate your account for violation of these terms.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Privacy Policy Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>1. Information We Collect</h6>
                    <p>We collect personal information and DNA samples as required for our testing services.</p>
                    
                    <h6>2. How We Use Your Information</h6>
                    <p>Your information is used to provide and improve our services, process your DNA sample, and communicate with you.</p>
                    
                    <h6>3. Data Security</h6>
                    <p>We implement appropriate security measures to protect your personal information and genetic data.</p>
                    
                    <h6>4. Data Sharing</h6>
                    <p>We do not share your genetic information with third parties without your explicit consent, except as required by law.</p>
                    
                    <h6>5. Data Retention</h6>
                    <p>We retain your information as long as necessary to provide our services and comply with legal obligations.</p>
                    
                    <h6>6. Your Rights</h6>
                    <p>You have the right to access, correct, and delete your personal information, subject to legal limitations.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <footer th:replace="~{fragments/layout :: footer}"></footer>
    
    <div th:replace="~{fragments/layout :: scripts}"></div>
    
    <!-- Form validation script -->
    <script>
        (() => {
            'use strict'

            // Fetch all forms that need validation
            const forms = document.querySelectorAll('.needs-validation')

            // Loop over them and prevent submission
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
        })()
    </script>
</body>

</html>
